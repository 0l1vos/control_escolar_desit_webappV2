<div class="wrapper">
  <div class="section-registro">
    <div class="body-registro">

      <div class="row mt-3 mb-3">
        <div class="form-group col-12">
          <label class="title-user">Registro de Materia</label>
        </div>
      </div>

      <mat-form-field class="mat-input" appearance="outline">
        <mat-label>NRC</mat-label>
        <input matInput [(ngModel)]="materia.nrc" name="nrc" mask="00000" placeholder="Ej. 12345">
        <mat-error *ngIf="errors.nrc">{{ errors.nrc }}</mat-error>
      </mat-form-field>

      <mat-form-field class="mat-input" appearance="outline">
        <mat-label>Nombre de la materia</mat-label>
        <input matInput [(ngModel)]="materia.nombre" name="nombre" (keypress)="soloLetras($event)" placeholder="Ej. Ingeniería de Software">
        <mat-error *ngIf="errors.nombre">{{ errors.nombre }}</mat-error>
      </mat-form-field>

      <mat-form-field class="mat-input" appearance="outline">
        <mat-label>Sección</mat-label>
        <input matInput [(ngModel)]="materia.seccion" name="seccion" mask="000" placeholder="Ej. 001">
        <mat-error *ngIf="errors.seccion">{{ errors.seccion }}</mat-error>
      </mat-form-field>

      <div class="row mb-3 aligned-element">
        <div class="col-12 p-0">
          <label class="subtitle-field">Días de clase:</label>
          <section class="checkbox-section">
            <mat-checkbox class="example-margin" *ngFor="let dia of diasSemana"
                          [checked]="materia.dias.includes(dia.value)"
                          (change)="checkboxChange($event, dia.value)">
              {{dia.nombre}}
            </mat-checkbox>
          </section>
          <div *ngIf="errors.dias" class="invalid-feedback d-block">{{ errors.dias }}</div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6 col-12 aligned-element">
          <mat-form-field class="mat-input" appearance="outline">
            <mat-label>Hora Inicio</mat-label>
            <input matInput [ngxTimepicker]="pickerInicio" [(ngModel)]="materia.hora_inicio" name="hora_inicio" readonly>
            <mat-icon matSuffix (click)="pickerInicio.open()">access_time</mat-icon>
            <mat-error *ngIf="errors.hora_inicio">{{ errors.hora_inicio }}</mat-error>
          </mat-form-field>
          <ngx-material-timepicker #pickerInicio [format]="12"></ngx-material-timepicker>
        </div>

        <div class="col-md-6 col-12 aligned-element">
          <mat-form-field class="mat-input" appearance="outline">
            <mat-label>Hora Fin</mat-label>
            <input matInput [ngxTimepicker]="pickerFin" [(ngModel)]="materia.hora_fin" name="hora_fin" readonly>
            <mat-icon matSuffix (click)="pickerFin.open()">access_time</mat-icon>
            <mat-error *ngIf="errors.hora_fin">{{ errors.hora_fin }}</mat-error>
          </mat-form-field>
          <ngx-material-timepicker #pickerFin [format]="12"></ngx-material-timepicker>
        </div>
      </div>

      <mat-form-field class="mat-input" appearance="outline">
        <mat-label>Salón</mat-label>
        <input matInput [(ngModel)]="materia.salon" name="salon" maxlength="15" (keypress)="soloAlfanumerico($event)" placeholder="Ej. CCO 104">
        <mat-hint align="end">{{materia.salon?.length || 0}}/15</mat-hint>
        <mat-error *ngIf="errors.salon">{{ errors.salon }}</mat-error>
      </mat-form-field>

      <mat-form-field class="mat-input" appearance="outline">
        <mat-label>Programa Educativo</mat-label>
        <mat-select [(ngModel)]="materia.programa_educativo" name="programa">
          <mat-option *ngFor="let programa of programas" [value]="programa">
            {{ programa }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="errors.programa_educativo">{{ errors.programa_educativo }}</mat-error>
      </mat-form-field>

      <mat-form-field class="mat-input" appearance="outline">
  <mat-label>Profesor Asignado</mat-label>
  <mat-select [(ngModel)]="materia.profesor" name="profesor">
    <mat-option *ngFor="let maestro of listaMaestros" [value]="maestro.id">
      {{ maestro.user.first_name }} {{ maestro.user.last_name }}
    </mat-option>
  </mat-select>
  <mat-error *ngIf="errors.profesor">{{ errors.profesor }}</mat-error>
</mat-form-field>

      <mat-form-field class="mat-input" appearance="outline">
        <mat-label>Créditos</mat-label>
        <input matInput [(ngModel)]="materia.creditos" name="creditos" mask="00" placeholder="Ej. 4">
        <mat-error *ngIf="errors.creditos">{{ errors.creditos }}</mat-error>
      </mat-form-field>

      <div class="section-buttons">
        <button class="btn btn-danger" (click)="regresar()">Cancelar</button>
        <button *ngIf="!editar" class="btn btn-primary" type="submit" (click)="registrar()">Registrar</button>
      </div>

    </div>
  </div>
</div>
